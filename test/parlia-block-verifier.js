/** @var artifacts {Array} */
/** @var web3 {Web3} */
/** @function contract */
/** @function it */
/** @function before */
/** @var assert */

const ParliaBlockVerifier = artifacts.require("ParliaBlockVerifier");
const SimpleValidatorChecker = artifacts.require("SimpleValidatorChecker");
const VerifierGasMeasurer = artifacts.require("GasMeasurerVerifier");

contract("ParliaBlockVerifier", async (accounts) => {
  const [] = accounts
  it("chapel 200's block should work properly", async () => {
    const verifier = await ParliaBlockVerifier.new()
    const {
      result,
      newValidatorSet
    } = await verifier.extractParliaSigningData('0xf902d0a056991a71bc79fea816387a6076068274af17e08bbdc81c2f289447f60a19d310a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794980a75ecd1309ea12fa2ed87a8744fbfc9b863d5a0be326f334378264bc98880f49863c9b4a0f1dbce836497a769e19fbfe291dee8a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000281c88401c9c38080845f06d057b8d9d983010000846765746889676f312e31322e3137856c696e75780000000000001284214b9b9c85549ab3d2b972df0deef66ac2c935552c16704d214347f29fa77f77da6d75d7c752980a75ecd1309ea12fa2ed87a8744fbfc9b863d5a2959d3f95eae5dc7d70144ce1b73b403b7eb6e0b71b214cb885500844365e95cd9942c7276e7fd8f474cf03cceff28abc65c9cbae594f725c80e12d3674be94d2b375f63ae71920774699382646cf3ef8ba561a8bfad6f116b8b2e6220792aea7d71c7234d7e1d574948e492b42993dba91a4a9988009d607f0264c01a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '97', '200',);
    assert.equal(result.coinbase.toLowerCase(), '0x980a75ecd1309ea12fa2ed87a8744fbfc9b863d5')
  })
  it("parlia block header is well-parsed", async () => {
    const verifier = await ParliaBlockVerifier.new()
    const {
      result,
      newValidatorSet
    } = await verifier.extractParliaSigningData('0xf90403a0e06d1e696e78bef7671cc0936b4428d9f6b3aa5ef1dd1b21620fca6742d6faf1a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479470f657164e5b75689b64b7fd1fa275f334f28e18a04f954c11b1721ed1816b4eef4a57ba99c7288f1a5dbaf09f375efbb888bc6a8ea088d550352ebf720520dc48b2a16a82da57524145862bbedd46f2d22166bf7069a0ff6fc0e069e4e43b42d84b218d3a8bbead88cc5f06044c8f6cb64fa446520c26b90100fffff77feefbffffffbffb7dfffffffffffffffebfffff7ffef5fffffefb7ffbfeffffff75fdfffb7fffbfbfdf5fffeffff7ffffffcf7f7fffffb7bdffffffffffbfffffbfeffffffff7ffddb7ffffefffff9ffffffffedfffffffffffbffffffff5fffff3fff7fbeeef3f7ffdefffffbbbfffebefbffffffcfb3fffbfdffdffbffdffeedffffffff7ffffddffffffbff7fdfc5fb7f6dffdfbffef7fff6dffffffffffbefffffff96efff7bdff7fefdfbfbfde7f7fcfdffdffffbdffffeffbfff7b7ffffbffdd5de7ffbfffdffffd7bffffdf7ffef7fffffffeffffffffffff3fdffffedfdfdfddded7fd3fef7fedfdffffbffff5fffffffff3bdebfffffffbf0283c79d908405f5e1008405ee8b078461a65ec5b90205d883010105846765746888676f312e31372e32856c696e7578000000c3167bdf2465176c461afb316ebc773c61faee85a6515daa295e26495cef6f69dfa69911d9d8e4f3bbadb89b29a97c6effb8a411dabc6adeefaa84f5067c8bbe2a7cdd959bfe8d9487b2a43b33565295a698f7e22d4c407bbe49438ed859fe965b140dcf1aab71a93f349bbafec1551819b8be1efea2fc46ca749aa14430b3230294d12c6ab2aac5c2cd68e80b16b581685b1ded8013785d6623cc18d214320b6bb6475970f657164e5b75689b64b7fd1fa275f334f28e187ae2f5b9e386cd1b50a4550696d957cb4900f03a8b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec739bb832254baf4e8b4cc26bd2b52b31389b56e98b9f8ccdafcc39f3c7d6ebf637c9151673cbc36b88a6f79b60359f141df90a0c745125b131caaffd12b8f7166496996a7da21cf1f1b04d9b3e26a3d077be807dddb074639cd9fa61b47676c064fc50d62cce2fd7544e0b2cc94692d4a704debef7bcb61328e2d3a739effcd3a99387d015e260eefac72ebea1e9ae3261a475a27bb1028f140bc2a7c843318afdea0a6e3c511bbd10f4519ece37dc24887e11b55dee226379db83cffc681495730c11fdde79ba4c0c58ec4877d8453b381c8c1c6950bd2ce0a4888e4cf2efe677abbbe1c83ce98206293d6e8ae9adbd85b3b4e1afd653ff03f5ab96e2b41c6adb77d42dd499574a1500a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '56', '200');
    assert.equal(result.parentHash, '0xe06d1e696e78bef7671cc0936b4428d9f6b3aa5ef1dd1b21620fca6742d6faf1');
    assert.equal(result.coinbase, '0x70F657164e5b75689b64B7fd1fA275F334f28e18');
    assert.equal(result.stateRoot, '0x4f954c11b1721ed1816b4eef4a57ba99c7288f1a5dbaf09f375efbb888bc6a8e');
    assert.equal(result.txsRoot, '0x88d550352ebf720520dc48b2a16a82da57524145862bbedd46f2d22166bf7069');
    assert.equal(result.receiptsRoot, '0xff6fc0e069e4e43b42d84b218d3a8bbead88cc5f06044c8f6cb64fa446520c26');
    assert.equal(result.blockNumber, '13082000');
    assert.equal(result.blockHash, '0xeafc056d4cd2355235e385604eb86c9fc3da295a5ac6b292dcd518aad81c96c7');
  })
  it("signing data can be extracted", async () => {
    const verifier = await ParliaBlockVerifier.new()
    // block 13082000 with validators in extra data
    {
      const {
        result,
        newValidatorSet
      } = await verifier.extractParliaSigningData('0xf90403a0e06d1e696e78bef7671cc0936b4428d9f6b3aa5ef1dd1b21620fca6742d6faf1a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479470f657164e5b75689b64b7fd1fa275f334f28e18a04f954c11b1721ed1816b4eef4a57ba99c7288f1a5dbaf09f375efbb888bc6a8ea088d550352ebf720520dc48b2a16a82da57524145862bbedd46f2d22166bf7069a0ff6fc0e069e4e43b42d84b218d3a8bbead88cc5f06044c8f6cb64fa446520c26b90100fffff77feefbffffffbffb7dfffffffffffffffebfffff7ffef5fffffefb7ffbfeffffff75fdfffb7fffbfbfdf5fffeffff7ffffffcf7f7fffffb7bdffffffffffbfffffbfeffffffff7ffddb7ffffefffff9ffffffffedfffffffffffbffffffff5fffff3fff7fbeeef3f7ffdefffffbbbfffebefbffffffcfb3fffbfdffdffbffdffeedffffffff7ffffddffffffbff7fdfc5fb7f6dffdfbffef7fff6dffffffffffbefffffff96efff7bdff7fefdfbfbfde7f7fcfdffdffffbdffffeffbfff7b7ffffbffdd5de7ffbfffdffffd7bffffdf7ffef7fffffffeffffffffffff3fdffffedfdfdfddded7fd3fef7fedfdffffbffff5fffffffff3bdebfffffffbf0283c79d908405f5e1008405ee8b078461a65ec5b90205d883010105846765746888676f312e31372e32856c696e7578000000c3167bdf2465176c461afb316ebc773c61faee85a6515daa295e26495cef6f69dfa69911d9d8e4f3bbadb89b29a97c6effb8a411dabc6adeefaa84f5067c8bbe2a7cdd959bfe8d9487b2a43b33565295a698f7e22d4c407bbe49438ed859fe965b140dcf1aab71a93f349bbafec1551819b8be1efea2fc46ca749aa14430b3230294d12c6ab2aac5c2cd68e80b16b581685b1ded8013785d6623cc18d214320b6bb6475970f657164e5b75689b64b7fd1fa275f334f28e187ae2f5b9e386cd1b50a4550696d957cb4900f03a8b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec739bb832254baf4e8b4cc26bd2b52b31389b56e98b9f8ccdafcc39f3c7d6ebf637c9151673cbc36b88a6f79b60359f141df90a0c745125b131caaffd12b8f7166496996a7da21cf1f1b04d9b3e26a3d077be807dddb074639cd9fa61b47676c064fc50d62cce2fd7544e0b2cc94692d4a704debef7bcb61328e2d3a739effcd3a99387d015e260eefac72ebea1e9ae3261a475a27bb1028f140bc2a7c843318afdea0a6e3c511bbd10f4519ece37dc24887e11b55dee226379db83cffc681495730c11fdde79ba4c0c58ec4877d8453b381c8c1c6950bd2ce0a4888e4cf2efe677abbbe1c83ce98206293d6e8ae9adbd85b3b4e1afd653ff03f5ab96e2b41c6adb77d42dd499574a1500a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '56', '200');
      assert.equal(result.coinbase.toLowerCase(), '0x70f657164e5b75689b64b7fd1fa275f334f28e18')
      assert.deepEqual(Array.from(newValidatorSet).map(v => v.toLowerCase()), [
        '0x2465176c461afb316ebc773c61faee85a6515daa',
        '0x295e26495cef6f69dfa69911d9d8e4f3bbadb89b',
        '0x29a97c6effb8a411dabc6adeefaa84f5067c8bbe',
        '0x2a7cdd959bfe8d9487b2a43b33565295a698f7e2',
        '0x2d4c407bbe49438ed859fe965b140dcf1aab71a9',
        '0x3f349bbafec1551819b8be1efea2fc46ca749aa1',
        '0x4430b3230294d12c6ab2aac5c2cd68e80b16b581',
        '0x685b1ded8013785d6623cc18d214320b6bb64759',
        '0x70f657164e5b75689b64b7fd1fa275f334f28e18',
        '0x7ae2f5b9e386cd1b50a4550696d957cb4900f03a',
        '0x8b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec73',
        '0x9bb832254baf4e8b4cc26bd2b52b31389b56e98b',
        '0x9f8ccdafcc39f3c7d6ebf637c9151673cbc36b88',
        '0xa6f79b60359f141df90a0c745125b131caaffd12',
        '0xb8f7166496996a7da21cf1f1b04d9b3e26a3d077',
        '0xbe807dddb074639cd9fa61b47676c064fc50d62c',
        '0xce2fd7544e0b2cc94692d4a704debef7bcb61328',
        '0xe2d3a739effcd3a99387d015e260eefac72ebea1',
        '0xe9ae3261a475a27bb1028f140bc2a7c843318afd',
        '0xea0a6e3c511bbd10f4519ece37dc24887e11b55d',
        '0xee226379db83cffc681495730c11fdde79ba4c0c',
      ]);
    }
    // block 13082001 w/o validators in extra data
    {
      const {
        result,
        newValidatorSet
      } = await verifier.extractParliaSigningData('0xf9025ea0eafc056d4cd2355235e385604eb86c9fc3da295a5ac6b292dcd518aad81c96c7a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347947ae2f5b9e386cd1b50a4550696d957cb4900f03aa0250cf7c922d19a3fe86aa873f66847ec81fe3a9dd4b601ff4f3277ac96edbd2fa05df995f5895f9cf4923116c8272b5eff71e719be28fd5033d298d4c3954b3b35a092acd99501495017696d1f32624267613d5fcd1ae61a4316bb8c6f239fd2bb2fb90100f7febfbfe1ff7cdf9fed7fdeff1dbffef5b6bffbfffff76ff7ffafadfe6a77fdfddfaf2c7f7bbdee6fdbfbff6bbdb9fbf9dddbbffeffbffdffffaff9f3efffdff3f7fff9dfffffec7ff7fb7dcf3bfffdff96efffbbfdfcfbffffd7bfbfbffdffefffffe77bbff7fb7fff7dee397ffdffffafdbdfffdbfffffd7b7efffeefcabbbe7ff75fa7f5fbd7ffe7ffffdfabfebfdef79ffffce7dfbd77e3dbfbe1cdfebfebefb7fbebfffe6f719f7ffddffdbc7f7fbffdefbbfffdffffef7fa7fdfdbff7ff3f77e6d7bfdcfff7fefffffebfdfceef2bf65ecf7ff2d7df66fffabeffef77fdffbf5bf9d6fffcfff5f7be7dde9ff7fffef7ffdbfedaffef7ffa779fbf7fff0283c79d918405f5e100840482363c8461a65ec8b861d883010105846765746888676f312e31372e32856c696e7578000000c3167bdf98dad3b5a0c9f6e4f06e7eddec92065c8ba5630305a904d21822a6c15f2cf2e90916c19dfc6ac135021f44179f9dde2fde7904da16c5a488ceae534feec98ab500a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '56', '200');
      assert.equal(result.coinbase.toLowerCase(), '0x7ae2f5b9e386cd1b50a4550696d957cb4900f03a')
      assert.deepEqual(newValidatorSet, [])
    }
    // block 13131313
    {
      const {
        result,
        newValidatorSet
      } = await verifier.extractParliaSigningData('0xf9025ea0a2069ff3eaafb4422687dc653b5b1d687b1c2f318682c691edd5ddca8e38f018a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794a6f79b60359f141df90a0c745125b131caaffd12a0e4a5ac35e132110189e15e43f3b3304a984516366bf1bb11b454254b34f3696ea07c762f669d332b3b92f32c2c61ec5fb657e644866b917fe859bc602994c75601a0ece3f2a18b955f17fe468d8f8c318ca924722c8f32a713802420c05b5f44635eb90100b7fab7d7bf2dbe7fafdbeb7bf3ffadfff6fcdefbfffbf7dfff1edfffff739d77e867ffaadfdadfef779fdf39b9bfd3fffbe7ff93f7dfa7dfb0f78fbfffb77f897fffaf7dbb77ebfe997acf7ef7bf3bff7bb7ffafffdb7fefcde5ffedfefedf3eff6bdd7ff6dffff7ddfdefbfff6ffffefbf7ffeeb4beffe7f7bb63f3fdf3ec6f36bddff7cfb6f1bebcede7ffddbf38adf2f66eff6feedc5b7fe5fbdeffef79ffefffdfb7fadffef7dbebfb9f3e7fdfcbfcffbf2fffe9ff96dff7bf7ffb4feeffefb7ff8edfbfefde75fdffeffffe7d77bf7def7fcf7bebdfbf7cb3ef77f7efdf5dfe7fff7ffff83fefbfdfff1fee3ff7fffeef5afddafa69f67f7cfb7f7ff5f70283c85e318405f5350d840392ab268461a8c55fb861d983010106846765746889676f312e31362e3130856c696e75780000c3167bdf56c8d11fad0da9f8c18f13b49f132be98c5f5bc86f18968cd7197b662f0bdc852e22fc9bf4927ac4406850224da663e8405bf947ffdcd1f8607592831f770d5201a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '56', '200');
      assert.equal(result.coinbase.toLowerCase(), '0xa6f79b60359f141df90a0c745125b131caaffd12')
      assert.deepEqual(newValidatorSet, [])
    }
    // block 0
    {
      const {
        result,
        newValidatorSet
      } = await verifier.extractParliaSigningData('0xf903fca00000000000000000000000000000000000000000000000000000000000000000a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794fffffffffffffffffffffffffffffffffffffffea0919fcc7ad870b53db0aa76eb588da06bacb6d230195100699fc928511003b422a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b901000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001808402625a0080845e9da7ceb9020500000000000000000000000000000000000000000000000000000000000000002a7cdd959bfe8d9487b2a43b33565295a698f7e26488aa4d1955ee33403f8ccb1d4de5fb97c7ade29ef9f4360c606c7ab4db26b016007d3ad0ab86a0ee01c3b1283aa067c58eab4709f85e99d46de5fe685b1ded8013785d6623cc18d214320b6bb6475978f3adfc719c99674c072166708589033e2d9afec2be4ec20253b8642161bc3f444f53679c1f3d472f7be8361c80a4c1e7e9aaf001d0877f1cfde218ce2fd7544e0b2cc94692d4a704debef7bcb61328b8f7166496996a7da21cf1f1b04d9b3e26a3d0772d4c407bbe49438ed859fe965b140dcf1aab71a96bbad7cf34b5fa511d8e963dbba288b1960e75d64430b3230294d12c6ab2aac5c2cd68e80b16b581ea0a6e3c511bbd10f4519ece37dc24887e11b55d7ae2f5b9e386cd1b50a4550696d957cb4900f03a82012708dafc9e1b880fd083b32182b869be8e0922b81f8e175ffde54d797fe11eb03f9e3bf75f1d68bf0b8b6fb4e317a0f9d6f03eaf8ce6675bc60d8c4d90829ce8f72d0163c1d5cf348a862d55063035e7a025f4da968de7e4d7e4004197917f4070f1d6caa02bbebaebb5d7e581e4b66559e635f805ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '56', '200');
      assert.equal(result.coinbase.toLowerCase(), '0x0000000000000000000000000000000000000000')
      assert.deepEqual(Array.from(newValidatorSet).map(v => v.toLowerCase()), [
        '0x2a7cdd959bfe8d9487b2a43b33565295a698f7e2',
        '0x6488aa4d1955ee33403f8ccb1d4de5fb97c7ade2',
        '0x9ef9f4360c606c7ab4db26b016007d3ad0ab86a0',
        '0xee01c3b1283aa067c58eab4709f85e99d46de5fe',
        '0x685b1ded8013785d6623cc18d214320b6bb64759',
        '0x78f3adfc719c99674c072166708589033e2d9afe',
        '0xc2be4ec20253b8642161bc3f444f53679c1f3d47',
        '0x2f7be8361c80a4c1e7e9aaf001d0877f1cfde218',
        '0xce2fd7544e0b2cc94692d4a704debef7bcb61328',
        '0xb8f7166496996a7da21cf1f1b04d9b3e26a3d077',
        '0x2d4c407bbe49438ed859fe965b140dcf1aab71a9',
        '0x6bbad7cf34b5fa511d8e963dbba288b1960e75d6',
        '0x4430b3230294d12c6ab2aac5c2cd68e80b16b581',
        '0xea0a6e3c511bbd10f4519ece37dc24887e11b55d',
        '0x7ae2f5b9e386cd1b50a4550696d957cb4900f03a',
        '0x82012708dafc9e1b880fd083b32182b869be8e09',
        '0x22b81f8e175ffde54d797fe11eb03f9e3bf75f1d',
        '0x68bf0b8b6fb4e317a0f9d6f03eaf8ce6675bc60d',
        '0x8c4d90829ce8f72d0163c1d5cf348a862d550630',
        '0x35e7a025f4da968de7e4d7e4004197917f4070f1',
        '0xd6caa02bbebaebb5d7e581e4b66559e635f805ff',
      ]);
    }
    // latest known block with new validators (15946200)
    {
      const {
        result,
        newValidatorSet
      } = await verifier.extractParliaSigningData('0xf90403a062177e38673a43e86ef7804bd5272eaf5f133b9d6ee217c1ef2debca1f614c30a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794ea0a6e3c511bbd10f4519ece37dc24887e11b55da0d45514f56749c9ad5034a1e81dee7ba1c8b2da69ba0525493b4bda3d6e375825a0b8789043c2e8807825077f5620df7df01c2326d4849ba91681a6fba8aab5a710a07c2f5c172d09ad3e10f514b421ce89ce74190e3248d12fc1e3df71e971d0742cb90100e261124194f80d14022b486f980c081ac19cbe7c8c70b2a8d953c63079804794d23d3a1a04409385cf7850313c9423182dc966bb3a1be93157e48c5f33bee7b028e534ad8628a3e2fdc2b0a8f0e3016632560ac5296c3882a57497359bb897005339d838ab02c008b1e3b3a61f73a8a05bc46e5886bd3612223490506f3a36d61016e01db538ee07b39026669991308f602fac45adaebaa9fb091c519de57b3cff6d5f63210461463d00e6109395e406a5228cc121ba47b528bbb216b20c6d5420461143138a412f380d121d58369460f3953224298b7a9b73f1c70e5d2de51852f0d1142d398d740f7d9158170836018510ae2854f6bd48a0b48a0ce05c8c680283f351d88404a2feaa840104cac184622a5b5bb90205d883010107846765746888676f312e31332e34856c696e7578000000c3167bdf2465176c461afb316ebc773c61faee85a6515daa295e26495cef6f69dfa69911d9d8e4f3bbadb89b29a97c6effb8a411dabc6adeefaa84f5067c8bbe2d4c407bbe49438ed859fe965b140dcf1aab71a93f349bbafec1551819b8be1efea2fc46ca749aa1685b1ded8013785d6623cc18d214320b6bb6475970f657164e5b75689b64b7fd1fa275f334f28e1872b61c6014342d914470ec7ac2975be345796c2b7ae2f5b9e386cd1b50a4550696d957cb4900f03a8b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec739f8ccdafcc39f3c7d6ebf637c9151673cbc36b88a6f79b60359f141df90a0c745125b131caaffd12aacf6a8119f7e11623b5a43da638e91f669a130fac0e15a038eedfc68ba3c35c73fed5be4a07afb5be807dddb074639cd9fa61b47676c064fc50d62cce2fd7544e0b2cc94692d4a704debef7bcb61328e2d3a739effcd3a99387d015e260eefac72ebea1e9ae3261a475a27bb1028f140bc2a7c843318afdea0a6e3c511bbd10f4519ece37dc24887e11b55dee226379db83cffc681495730c11fdde79ba4c0cef0274e31810c9df02f98fafde0f841f4e66a1cd7ee0a297d75806912fb259fe8efd114956704ec64cb790438c76d50e1fed0e921aa98030aa1d6f883d60b77dec2147cb7046ade017ebee5e2e0e4bc6a382391800a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '56', '200');
      assert.equal(result.coinbase.toLowerCase(), '0xea0a6e3c511bbd10f4519ece37dc24887e11b55d')
      assert.deepEqual(Array.from(newValidatorSet).map(v => v.toLowerCase()), [
        '0x2465176c461afb316ebc773c61faee85a6515daa',
        '0x295e26495cef6f69dfa69911d9d8e4f3bbadb89b',
        '0x29a97c6effb8a411dabc6adeefaa84f5067c8bbe',
        '0x2d4c407bbe49438ed859fe965b140dcf1aab71a9',
        '0x3f349bbafec1551819b8be1efea2fc46ca749aa1',
        '0x685b1ded8013785d6623cc18d214320b6bb64759',
        '0x70f657164e5b75689b64b7fd1fa275f334f28e18',
        '0x72b61c6014342d914470ec7ac2975be345796c2b',
        '0x7ae2f5b9e386cd1b50a4550696d957cb4900f03a',
        '0x8b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec73',
        '0x9f8ccdafcc39f3c7d6ebf637c9151673cbc36b88',
        '0xa6f79b60359f141df90a0c745125b131caaffd12',
        '0xaacf6a8119f7e11623b5a43da638e91f669a130f',
        '0xac0e15a038eedfc68ba3c35c73fed5be4a07afb5',
        '0xbe807dddb074639cd9fa61b47676c064fc50d62c',
        '0xce2fd7544e0b2cc94692d4a704debef7bcb61328',
        '0xe2d3a739effcd3a99387d015e260eefac72ebea1',
        '0xe9ae3261a475a27bb1028f140bc2a7c843318afd',
        '0xea0a6e3c511bbd10f4519ece37dc24887e11b55d',
        '0xee226379db83cffc681495730c11fdde79ba4c0c',
        '0xef0274e31810c9df02f98fafde0f841f4e66a1cd',
      ]);
    }
  });
  it("make sure validator transition done well", async () => {
    const verifier = await ParliaBlockVerifier.new()
    const checker = await SimpleValidatorChecker.new([
      '0x2465176c461afb316ebc773c61faee85a6515daa',
      '0x295e26495cef6f69dfa69911d9d8e4f3bbadb89b',
      '0x29a97c6effb8a411dabc6adeefaa84f5067c8bbe',
      '0x2d4c407bbe49438ed859fe965b140dcf1aab71a9',
      '0x3f349bbafec1551819b8be1efea2fc46ca749aa1',
      '0x685b1ded8013785d6623cc18d214320b6bb64759',
      '0x70f657164e5b75689b64b7fd1fa275f334f28e18',
      '0x72b61c6014342d914470ec7ac2975be345796c2b',
      '0x7ae2f5b9e386cd1b50a4550696d957cb4900f03a',
      '0x8b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec73',
      '0x9f8ccdafcc39f3c7d6ebf637c9151673cbc36b88',
      '0xa6f79b60359f141df90a0c745125b131caaffd12',
      '0xaacf6a8119f7e11623b5a43da638e91f669a130f',
      '0xac0e15a038eedfc68ba3c35c73fed5be4a07afb5',
      '0xbe807dddb074639cd9fa61b47676c064fc50d62c',
      '0xce2fd7544e0b2cc94692d4a704debef7bcb61328',
      '0xe2d3a739effcd3a99387d015e260eefac72ebea1',
      '0xe9ae3261a475a27bb1028f140bc2a7c843318afd',
      '0xea0a6e3c511bbd10f4519ece37dc24887e11b55d',
      '0xee226379db83cffc681495730c11fdde79ba4c0c',
      '0xef0274e31810c9df02f98fafde0f841f4e66a1cd',
    ]);
    const {newValidatorSet} = await verifier.verifyValidatorTransition('56', [
      '0xf90403a062177e38673a43e86ef7804bd5272eaf5f133b9d6ee217c1ef2debca1f614c30a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794ea0a6e3c511bbd10f4519ece37dc24887e11b55da0d45514f56749c9ad5034a1e81dee7ba1c8b2da69ba0525493b4bda3d6e375825a0b8789043c2e8807825077f5620df7df01c2326d4849ba91681a6fba8aab5a710a07c2f5c172d09ad3e10f514b421ce89ce74190e3248d12fc1e3df71e971d0742cb90100e261124194f80d14022b486f980c081ac19cbe7c8c70b2a8d953c63079804794d23d3a1a04409385cf7850313c9423182dc966bb3a1be93157e48c5f33bee7b028e534ad8628a3e2fdc2b0a8f0e3016632560ac5296c3882a57497359bb897005339d838ab02c008b1e3b3a61f73a8a05bc46e5886bd3612223490506f3a36d61016e01db538ee07b39026669991308f602fac45adaebaa9fb091c519de57b3cff6d5f63210461463d00e6109395e406a5228cc121ba47b528bbb216b20c6d5420461143138a412f380d121d58369460f3953224298b7a9b73f1c70e5d2de51852f0d1142d398d740f7d9158170836018510ae2854f6bd48a0b48a0ce05c8c680283f351d88404a2feaa840104cac184622a5b5bb90205d883010107846765746888676f312e31332e34856c696e7578000000c3167bdf2465176c461afb316ebc773c61faee85a6515daa295e26495cef6f69dfa69911d9d8e4f3bbadb89b29a97c6effb8a411dabc6adeefaa84f5067c8bbe2d4c407bbe49438ed859fe965b140dcf1aab71a93f349bbafec1551819b8be1efea2fc46ca749aa1685b1ded8013785d6623cc18d214320b6bb6475970f657164e5b75689b64b7fd1fa275f334f28e1872b61c6014342d914470ec7ac2975be345796c2b7ae2f5b9e386cd1b50a4550696d957cb4900f03a8b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec739f8ccdafcc39f3c7d6ebf637c9151673cbc36b88a6f79b60359f141df90a0c745125b131caaffd12aacf6a8119f7e11623b5a43da638e91f669a130fac0e15a038eedfc68ba3c35c73fed5be4a07afb5be807dddb074639cd9fa61b47676c064fc50d62cce2fd7544e0b2cc94692d4a704debef7bcb61328e2d3a739effcd3a99387d015e260eefac72ebea1e9ae3261a475a27bb1028f140bc2a7c843318afdea0a6e3c511bbd10f4519ece37dc24887e11b55dee226379db83cffc681495730c11fdde79ba4c0cef0274e31810c9df02f98fafde0f841f4e66a1cd7ee0a297d75806912fb259fe8efd114956704ec64cb790438c76d50e1fed0e921aa98030aa1d6f883d60b77dec2147cb7046ade017ebee5e2e0e4bc6a382391800a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025da0c4432b657d644b4955e45c499b9b49eec78305113aa4f6e5d439f7782e46e021a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794ee226379db83cffc681495730c11fdde79ba4c0ca04e9010735a2c6a1516f4cc9aed062bc06ee3b1f1fc2abc78b0428e5405ce1f51a013a5ee96a572e3772d770c28bfcecc9f0f016e73abdd0f8ebff798315770c0ada0aaf17f17d32cbe4570a613fb29a8754d9eff043dc5891617c00bf6680c1f209cb9010056a192514cc0315a0e164129828a580eb11825fabf54e4034e5a18a6aaca202432a82b404546c9a151f209740497420008b240d0a77808c96dda0c4881ada212e254448b508048300d8c05ca179088b2e81463abddce4e0ae48c226b965eb63153e35ee1979205d9590d59c41af2cbccff9e1733a29bff54f03702b610db15911209b62b03d1c1c3adce55228e00f136a42db69981bb3a4a32ee1b403fe00b33db6fd810040c90f3012062377a1e9a83ca80e8c4f2d225769a08aa070082ad5a77248e075fb0513690c97956c89316807f30e3042c35635916b0762e1ae9e0104c9ebc1ba5d1d3d7078001825c073554a524942d60ca756d6051d9241410311d0283f351d984049fe2dd83d2f7fc84622a5b5eb861d883010105846765746888676f312e31362e37856c696e7578000000c3167bdfcf9a501458505c467516b65c27eadcbaf24437180573fdf11eda3a8ef386689e1c49bb0c1d210474e38e9cfc3ee6031574934c2fd6ca06ca559556aa99cbf39e01a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025ea0905eaeaf20d83fb78a908597505a01df592321d1c77f9829385ed9fc9ed9c9b5a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794ef0274e31810c9df02f98fafde0f841f4e66a1cda0b10f63cc17f3ffa1698ab418f755efafc35cdd58a5185143c484c5aa43c716fba01aa94525b6b6b1e084b52d06ad783ffa54a875ce87e518d13ed10b00825ee6d7a082dd82d0922ce77b77fe5b1b57f9b6bb42800de45f1bcb836535cf200ad49720b901005a669a8726a015d6532a433dc4a0164c92b1ea7abe19d00ae9305c662ea00d0ef90b9769714ab44bc3e211b358cf83e69aa794118a3a8973f198af0917aca2dbd0b9343e19db5b2e0f2b63fbf43be3b46cd1eebb5ff7baeab506654dfe7e93c65b66d9acb30a9757381a5b77bfd158917b9312d1ba9fa740dc2674915ad8bf971135739786abae9466abb543bb22ca88ca2eb6b74c7f886abf7a4c781a954a309fc5e24d30ef6452be0235f567de4188ff6f17c0a79781777ed377231f126c482b3a273283a82f06141c1d526cff5619fff72530a12a3b595fa0afceb313fdf18b709d1fa189f0af95389a054780920df1378cefe14a844ca6260939f7155ef80283f351da84049b42fc840148250084622a5b61b861d883010107846765746888676f312e31362e37856c696e7578000000c3167bdf1b93ad5a579e04f93fbe0039b90f4ca49831534333341d8d7fd67e434d055f7c4795fc048558521984e4ad66ab427997b0d4f31e5b3ac52c2305648b5e6e665c01a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025ea06a55d9bc63e0ac9ca9fca233ce10e4a4a6d6682e0b42ce80c3916cc66eba9e01a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347942465176c461afb316ebc773c61faee85a6515daaa026422c9b29381f1d152234a6f6c1aa316f5d48cb01011fb83bdd7c12619381eaa0d5bda7163b5bf78dd8d4eee1949d7bf590b86738d4a557f7561d5a7147f1ce10a013d33fbca2516bbeec8764dd9742c382481de9424e66ba8718d897dd12349a29b901006f76667000d8b2d99ed01132a53a146eb30432e3a793c743354878622e48331c4c0ac83046cdb091c3d599380cd242a32f82d2d8bb1a6c210b6c04b927ee8bea1468a76c41c27c679b0307f999d58a70acd762db4f56aac6dd7522589cd9aea51e06557ed34777c69975d10e5b926a906b03316ecef93784a06a16921a9d51bf15abaa2ce2a0b0980482b52d930e718ec33526fd7d6babb8fd2efac5aed04b324b5fc6e8e00ce0968692e2c76ece9614ff261ee82eaa3d5540d5a2c35e9ccd70d91abd0e095f644e0d2d9d4e587251b3b33bb10c7b437ad9d6c6e71e5d28e0f7ceb394083f5151ff2d1bd58cf5479749e9132e7c508c506871082476ca53d56d0283f351db84049fde3d84013d353184622a5b64b861d883010105846765746888676f312e31332e34856c696e7578000000c3167bdf50e82d0850b9d2474b603ac12b22985f194f19eedec3fad4f56f2793feb012b527af9ac418a7f50d825f7a0c2ba484899018e34be512546dfbc8d60e690bad2e01a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025da04a2c357b4f3c6497fbfae208efaa0864cf99c6ceb777c52fac886e0f2f391cbda01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794295e26495cef6f69dfa69911d9d8e4f3bbadb89ba0f4cfe49ea4dbccbfafc6a9cc6cab5cf92684cf5da2f259d1584d85cfc096a946a0c2ebb02d5bc600059aa2d61982d61d79c1cfad3cad4aae7f5e017fb26c898548a02e464d58674ca1f8132863bdba6b5b4916116307993abf1967e6edbfadc6ae0cb901006323c2c098c07517886cd0bfc0018c5e9d09a27cb63c521a5a3b82e8aaa01100a0b33149a77dc48dabf61120810802a609d1080682621c137819250063ab27ec3078e28d260814a10f02239d1821c330ebd763224f5ed8ce980c85c594698c2a27e2992ca60333b0702720239adbc990be84125b941dbf67406e21b491d8959514019b109229143226d2955c0d922c8a40b53489013e111975201a4c20eb5d20bbf7e5001505591f83120b4c020f5b247a6511c0229200346a1c7a7085226e0f21fc15220bbb244a326474b42883108aba6071033d6d621957202e6a9280acf01830b2f27c1c50780330558576809048e29c6209e14f044cf1c898848122801a0283f351dc84049d1a2f83c081b084622a5b67b861d883010108846765746888676f312e31372e36856c696e7578000000c3167bdf0261e7a76624340f85113459c35dbec0d821a175f0c87efae0f0c3c6a6fb00a934e2a28ec79ca15dea05bd02345ff634cd3a45f06b60bfb19a42495d93f2342300a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025da0dae9d06b306642c2fd057854f2d4d410aed5eb1ccf3102b6825d7373bd28aa75a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479429a97c6effb8a411dabc6adeefaa84f5067c8bbea0562dfd26fa2bed7a5e95f7179b892f075ce710c2f6b994ee8ad434de8678ca90a039d0553c09cba90d99b0dcc34e7620b47be59dca5032cdabfc4fec680c0e01eaa032d21def4ae8d82aba236018fb1b763ea6a886b692ba45f5952597aa8f88ef2eb90100022107ec021398112000c4288d9006c0900ca0a302414402713000812200003d890152c4a68570585a52d5b0020243000a4a320806541811543495001122a2c38552a008081104728520402e23819074203022e800ec182239c40403801001014d87832407038404b4088010a88008117b80c9c00c4025004042003a18b02425904043a60681200702c5070293824e84002ea53d400ea448350ccec9051502a003c00809100a0110a0046057020ae040a400116020850fa07f82200902c2880830828502011000e23c9891100c4510a87803a80420a990120080210a1119b420011014016720604111383a8857041c24c0220401702b004802120864120014220283f351dd8404987d16838f24cd84622a5b6ab861d983010107846765746889676f312e31362e3130856c696e75780000c3167bdf789a7d6c1b84081c457c56dec13dd669b7d73857eb507da8ae1636f4b1a6a2bc366f24e7d909f60ccefd5384cc1885029d2416ad5ae80850c59e3663e7427aef01a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025ea080a72ad7efd994f530f9b1f20f303e64dee74678d2e843efca38aac6ad3c6e3da01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347942d4c407bbe49438ed859fe965b140dcf1aab71a9a04284853f4d84ac2b5cc899512372a97d046859c4a5249a53980a5538044f4bcaa05e54b96eab7c2b292ac309955715d9b5fde14f6a872e5dac017b319294981e37a0db8d47ac13794a27a01af2c2bba10846b040cd9ee6e7bf094b30fd3a8e5cc993b90100e7781a02d56714125d9f8d7dd69a13ef3934f3607606a03df5de1628ae380334a708992a4647f6af45540c32854303433dc092d19ae9ca32247e464299ecb5393660b5caffa3643315bdc01a0706ee30be7357856bd5bdc284fe162cf814da601292d973c79e9c6d31098e12f480da9e2b6033d8d9de47aa31a170fa31591a454068b3ee0a1db21eddc0b7658375813797a5bc2dd83a8f789db86cf19dc11a209347de0a4fbc499aac06e365ee0e1e88f00534a5648ca4aef38aeb83150c4c52595a8d4ee320647296060f74e80319baf323ce8ca82dea3b0802270a9b64ed4478719c80fc7d031987c59906d5492fd4bb923f4de008167fe1b5386279f95d9c0283f351de84049d15928402423cfa84622a5b6db861d883010105846765746888676f312e31332e34856c696e7578000000c3167bdf7f2d0dd45f25976d76336749c2d72a1942a5672f2179943dca434d01980c284517c6a49c63bc09a45003373df8f5ddee971df9c23714c2a24089ad499a1c294101a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025ea0001910ce89ad32059af4cf0ed05867885e8cb3ecc466c62f35353ab22cd3a554a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347943f349bbafec1551819b8be1efea2fc46ca749aa1a0f13e56ef993f5ec9a6f6b144ad447dad8534a2994ae998db58c017e4936c623aa0f993a7c337c02ac3da16aeb83dc51eff90faa41649150651a24981c731bd689ca09ddacbd48db9f30edc5d0a12b9771e86136d0131c7beb4f9ba3741b5be0a2523b9010053b36a53606c15326e6cd0308e821c2f700e262f764987fae5142c622be003172c280af38c4ed181535934780c18c2d838d1909a96010b7153724848712ca7b02c52346d2618f8218dba423e0690a96535da2af6fb6798fabb2752c08910102a3fc6f76eb6079c47330da153fba9e9d4fb543ad3e19f2fca20ea969255d96f8530ecccf62e9bb014d8dd97019a837f8742b43c17d4ffb82afd4e7fd038c74b689315ca2f43ef101b36cbf2e1174ffc02e18e10e19cb389942b5e3f0367762cc823b255024f5e2c32069cc5756d2b3f7bf312f21d8b2ca1b96920fb6ab24ee9654d30f409bfc15ac03738117044055c10f46897f879ceb6e9a62a1e03920de4f90283f351df84049bdbd984013fbcbe84622a5b70b861d883010107846765746888676f312e31372e33856c696e7578000000c3167bdfefee4fcd7a945904a5e44668626f1ad543c4e58aac5466fe9917a8671f2355c0124ece8edf8e040ba94e89424b6b8e7b7d3c31ec7a012543b95c0c726a12b4af01a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025da0634c78c3e50684c26f909d073f1dbfcbcea235e24773faa8ee2c42ff5cf8abeba01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794685b1ded8013785d6623cc18d214320b6bb64759a0f979f80c79d9dd5a3a21580212c10d93b007a4f4b562abce4458c1df9bcea986a0294a489ce048f9793d281da23a6294575ea428d5419b75410878cff8e504f00da030745bdf177c704abe5566af325e0b6f36d3daca2a11943c19863e4cb406a340b901005eaf135324619a961008e12ca6929508f05232e6860180e7c1ca91abbb0c0010b275570e40ba5c5f42741c3c191e05e20c4400c8fe0e8933008c0252113c32cb85f23e28c9400224478060dd7173c322205b060a5ffc0efb09ef004b935f611a10c3a564071313f07447206efe9bea91f85780590d11a7c6446703969498a326f007a9e78254a807e2874f38b912e00b132524cdd12b9819374cb8fdda31503097d5140c53ce343100c0a90402875a0c20640b47e18ae23a6884789980048a520413fc0aaf90004e0e508e32bc00168c3b48b280004b20181892228a149de86315b096da27b41aca013ddc901700944186687caa79ca6478a22999108b04a8500283f351e08404a077b383ceada284622a5b73b861d883010107846765746888676f312e31332e34856c696e7578000000c3167bdf20e927afd44dd532364ca87fb0bef1a9bdbb11b90728f23cdfc9133ce34ea8940f8d2e02055905ca60b850da14e34276982c13ef8465c58fc1e3da7c8b728bb000a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025ea0c227fb35db43196ff03e0a3a196a296f05663bd7cf4884609f328baa5cab41f6a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479470f657164e5b75689b64b7fd1fa275f334f28e18a079cb893f48b700667cab66fcd2a08725bbfc8f172a18c8d9a4527a5b9d26acf6a011255a8f86e4e1aca1694b319eb6c4a9987aee13de80bac9b33b4fd5c3ed3e81a07b1036120bf4670de3102b639fb7bc8de86e795f3f4808308406f2bb872eb323b90100bf28320182ec311f4e2ab5d09aba1962a1190e72177edc0ec17806a2ebdc45ba238a5a6b108693b117a279fe9da6118a4b61d141fb2be0b9d17a9fc0872ecddd0d47a4eb72dbe2a2adf3d2d9e63592b7a75142694fe66becbbee07e99475f83efc729debb22333392d880d315fdbaaf959407bd5f09827ee2877369a56df95fb57c6718f04c5ea03ae9fb6f21b05b9861474aff5b922146e89e879c08fc5cb349b074641730e04c334e56062db2e420fee0e0d9a1bcf53ddd5237beb07eeaedfb6199d138d0af0e6926e60b79a96752cfb590a440df177590f07a4cbbf31e02a78f4964f78d640743d3d02aa4c231e5b7650866f46dd765ce0038abcb385805e0283f351e18404a5182984010c6f0b84622a5b76b861d883010107846765746888676f312e31332e34856c696e7578000000c3167bdfcccce2db18777cd2f2ea6f9f476029c2f9c05fc10daada5300e27a116fdcb49e276e6864126fd3068bb4d50ff7d66120cbd89da6be70b6fb5be537e48d60979600a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025da07f2757f5fce444496b1b3c5e8a7d5767fbf80f9d399c0243fb4cbce3577a1064a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d493479472b61c6014342d914470ec7ac2975be345796c2ba0168b73db79b7d76c2d4092b3f8ad9e9858a6eeee0d4538a0eb332cb35a35b68ea0ffc2d348c44de73b1b4088e5d868cf50be02d6f4049f5835b78a889c6ae42649a09081483746ef5e958501025730fed744c4450b04446407dc4ea5a5312ebcaea6b901004a7222c3322059164d98c071a0a01c2a301477e8360d9c0b449c16136a04b1540684a8e4461e28270b121a2a9dec076009e3ceac183568395488281c612fe4814850604d304760603ff6aa7d00d2c531289b6fea5b6f912af1ae8608fb1b88803a429c6ca70abd1df40230d63a9e7c5b28dcd809835d2f9742b10234191d14d110318c56074724883c809512d818618f10643439713ab10e36881a4499c1de3abf25d2802c4d121931606d852f4e330860042161f8810112a0d065a1a04ea05c233a85a287a218030408211b8f7b1e90bc16615e292821592050604f9c87e0f5113034aea45140521738150175205460f45f9408581e924c00239a87c40000360283f351e28404a205b883d600dc84622a5b79b861d983010108846765746889676f312e31362e3133856c696e75780000c3167bdfe2f19188e1c618d799d46413c9b0cf33eb523f5ee409f38e0282764dcb32fa813e2a74448443c5bf363b54d84a1e160b47de015c8858fc1e8447ed4ae79b2ccc01a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025da0a658ce421305d65fb6642891291cea94a803f657af6d425b36b8c24fc99ca185a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347947ae2f5b9e386cd1b50a4550696d957cb4900f03aa0058071f0c134dcbb1c15572287865558bfff16bb4237fc0970bde777ca865902a07cb072fd52c2d6baba6c6525e3923e764988e3ffdd5cc1d93dc037e3f3fad68ea0c36a418ca88ae9220855b1541a045ff9b4c15472dd29a66cb2713623daf313b7b9010047627ac022cc101a00af112dacbb580a5015a263d68d15aa05d049663b00186a0c0356a75126814d035100821c0c419a0b6450009a28281b412824b3032cb3c2001824e8095a2064895b24f80a138a30269b839c1a4e78ba83be22029d3d560b7f335da90b43c7e4b86029c153f11a843ecac0a7a4df776d80ea1038965aa5cb18abb32ea296696206eac5319120e1803ca7ad83147ffe4af4c4384655cc1931838d40028178f712cd10a501ca968c01f00144c2958f84f1698b332b00b06f40d3948d028de5154604c63b02550216e2723b47908cadb2554bc221022830e40c71f174ad64096082113804c245dc92a1a168854ff18a44407220480c2005c7300283f351e38404a6a7bc83db52dd84622a5b7cb861d883010107846765746888676f312e31332e34856c696e7578000000c3167bdfdbacf4c5fa4a0c7f33a1fc6d0634d97c5651571072e39686a7617920ab5eb9d339118553bdf0206832d90577a9fe59266f47284f657b41440e9b4ac4efb3893c01a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025ea03a7c8fcf0572c14a1a9d4b71d2eeb2b328c86e686e55b15b3829cbcd2f25d48ea01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347948b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec73a0d557ae780b7c142c4929a5dbef57f743c935d72244653e902aaf7f57e51f05dea0ecf899ea9c7a8a2ac5b662786c5b1abd443c5b2f755897f2701c23c3a527a57ea04754b3fcacb98ac414532778b9c6d066dc222c478d22f38878b0602399d5c3cbb901004a2e1e4a24a2501a460269a68a8e128ad1707676b73f6f0a485818912a881d96000c98f8144e3057131f3fa2694a17c82c42b1fefb2189b1c11a602461bfb7da84d221993e8904e61d28daba98d5c364a8f6ab8af8e00ac284fd0271da9c91991d42fab4bb06b198711b8ed1fed8983cfaca137a8999a706136250315638e4f35e90b072a64d2125e6d4a52289c02787e0a5ee4ff0ba8d6dbfb19e6249715af8939f6a080978131cb064a1052b8f6005e60e9dd21ad3015426e2bbdcd3038c9e7a03b5ce2908e412983c17114c2b35d6f2078c5f894b78744d20226e1aeca170fb70fc58efc656cb0dacb8ab95289c2ef11ecffee95235c2ea93df5ca625361e0283f351e48404a34a128401089eaf84622a5b7fb861d883010108846765746888676f312e31372e36856c696e7578000000c3167bdf4df9e033f7c2fba4fc10db902704a856b89fc44335e9f28dcfd7ae7237b53ad9709e08b172d7c36e841a7d0dd18151ecb07111ea17d6502b65444e3812c2b61201a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
      '0xf9025da08224a571383d4d48a8b9c1a769b8339217795709e16c639731dc9dac9be5f42ea01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347949f8ccdafcc39f3c7d6ebf637c9151673cbc36b88a053c6ec83a5b046f7f7e700f5c7ff56c8aa534af62d928db6e0aa26b923039b03a09bc486d81ee583fc8f1ac3fb08647717b57183b7d64bb862262745b15779570fa0a08e8f4cd92d8213bb8745f45556dea0a32901a642f0e52a75e51bcaffe4aaf4b90100006016102858a81a12080424850010070094b0e02403c000138506600c10229002081020ad43908d41101014242802020084033a4018605202200620893480f604780d08a8ca002c2b48857901021020609222e418c4b88a85b69842c01a600054001031231301441100580b6a112b000a49c25a84982e4cdd200610103850151402209800d8241140e840c0d90020944e2ca40540378769f1bc0e580c910bb90281400243c01002820020198a407904260000c1149100aa3904ae100480a450801c05120224810302915164342010003902cc088005b61c0010d92a1840e4b00fb915311b445081092846de21c4500549961649502002632c9086226dd200800283f351e58404a033b783761cc484622a5b82b861d983010108846765746889676f312e31362e3133856c696e75780000c3167bdf50ab3e9c8c6166c679013d37d06d262ff9ac99ec9eb2dbb1583c6a2e4cb2d08e25633cf9449626b253ffd08ae26c3d1bb978b982e3a07168ad11256e38304a6401a00000000000000000000000000000000000000000000000000000000000000000880000000000000000',
    ], '200', checker.address);
    assert.deepEqual(Array.from(newValidatorSet).map(v => v.toLowerCase()), [
      '0x2465176c461afb316ebc773c61faee85a6515daa',
      '0x295e26495cef6f69dfa69911d9d8e4f3bbadb89b',
      '0x29a97c6effb8a411dabc6adeefaa84f5067c8bbe',
      '0x2d4c407bbe49438ed859fe965b140dcf1aab71a9',
      '0x3f349bbafec1551819b8be1efea2fc46ca749aa1',
      '0x685b1ded8013785d6623cc18d214320b6bb64759',
      '0x70f657164e5b75689b64b7fd1fa275f334f28e18',
      '0x72b61c6014342d914470ec7ac2975be345796c2b',
      '0x7ae2f5b9e386cd1b50a4550696d957cb4900f03a',
      '0x8b6c8fd93d6f4cea42bbb345dbc6f0dfdb5bec73',
      '0x9f8ccdafcc39f3c7d6ebf637c9151673cbc36b88',
      '0xa6f79b60359f141df90a0c745125b131caaffd12',
      '0xaacf6a8119f7e11623b5a43da638e91f669a130f',
      '0xac0e15a038eedfc68ba3c35c73fed5be4a07afb5',
      '0xbe807dddb074639cd9fa61b47676c064fc50d62c',
      '0xce2fd7544e0b2cc94692d4a704debef7bcb61328',
      '0xe2d3a739effcd3a99387d015e260eefac72ebea1',
      '0xe9ae3261a475a27bb1028f140bc2a7c843318afd',
      '0xea0a6e3c511bbd10f4519ece37dc24887e11b55d',
      '0xee226379db83cffc681495730c11fdde79ba4c0c',
      '0xef0274e31810c9df02f98fafde0f841f4e66a1cd',
    ])
  });
  it("verification of genesis block works", async () => {
    const verifier = await ParliaBlockVerifier.new()
    const {validatorSet} = await verifier.verifyBlockWithoutQuorum('56', '0xf903fca00000000000000000000000000000000000000000000000000000000000000000a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794fffffffffffffffffffffffffffffffffffffffea0919fcc7ad870b53db0aa76eb588da06bacb6d230195100699fc928511003b422a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b901000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001808402625a0080845e9da7ceb9020500000000000000000000000000000000000000000000000000000000000000002a7cdd959bfe8d9487b2a43b33565295a698f7e26488aa4d1955ee33403f8ccb1d4de5fb97c7ade29ef9f4360c606c7ab4db26b016007d3ad0ab86a0ee01c3b1283aa067c58eab4709f85e99d46de5fe685b1ded8013785d6623cc18d214320b6bb6475978f3adfc719c99674c072166708589033e2d9afec2be4ec20253b8642161bc3f444f53679c1f3d472f7be8361c80a4c1e7e9aaf001d0877f1cfde218ce2fd7544e0b2cc94692d4a704debef7bcb61328b8f7166496996a7da21cf1f1b04d9b3e26a3d0772d4c407bbe49438ed859fe965b140dcf1aab71a96bbad7cf34b5fa511d8e963dbba288b1960e75d64430b3230294d12c6ab2aac5c2cd68e80b16b581ea0a6e3c511bbd10f4519ece37dc24887e11b55d7ae2f5b9e386cd1b50a4550696d957cb4900f03a82012708dafc9e1b880fd083b32182b869be8e0922b81f8e175ffde54d797fe11eb03f9e3bf75f1d68bf0b8b6fb4e317a0f9d6f03eaf8ce6675bc60d8c4d90829ce8f72d0163c1d5cf348a862d55063035e7a025f4da968de7e4d7e4004197917f4070f1d6caa02bbebaebb5d7e581e4b66559e635f805ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '200');
    assert.deepEqual(Array.from(validatorSet).map(v => v.toLowerCase()), [
      '0x2a7cdd959bfe8d9487b2a43b33565295a698f7e2',
      '0x6488aa4d1955ee33403f8ccb1d4de5fb97c7ade2',
      '0x9ef9f4360c606c7ab4db26b016007d3ad0ab86a0',
      '0xee01c3b1283aa067c58eab4709f85e99d46de5fe',
      '0x685b1ded8013785d6623cc18d214320b6bb64759',
      '0x78f3adfc719c99674c072166708589033e2d9afe',
      '0xc2be4ec20253b8642161bc3f444f53679c1f3d47',
      '0x2f7be8361c80a4c1e7e9aaf001d0877f1cfde218',
      '0xce2fd7544e0b2cc94692d4a704debef7bcb61328',
      '0xb8f7166496996a7da21cf1f1b04d9b3e26a3d077',
      '0x2d4c407bbe49438ed859fe965b140dcf1aab71a9',
      '0x6bbad7cf34b5fa511d8e963dbba288b1960e75d6',
      '0x4430b3230294d12c6ab2aac5c2cd68e80b16b581',
      '0xea0a6e3c511bbd10f4519ece37dc24887e11b55d',
      '0x7ae2f5b9e386cd1b50a4550696d957cb4900f03a',
      '0x82012708dafc9e1b880fd083b32182b869be8e09',
      '0x22b81f8e175ffde54d797fe11eb03f9e3bf75f1d',
      '0x68bf0b8b6fb4e317a0f9d6f03eaf8ce6675bc60d',
      '0x8c4d90829ce8f72d0163c1d5cf348a862d550630',
      '0x35e7a025f4da968de7e4d7e4004197917f4070f1',
      '0xd6caa02bbebaebb5d7e581e4b66559e635f805ff',
    ]);
  });
  it("measure gas consumption for block verification", async () => {
    const measurer = await VerifierGasMeasurer.new();
    let result = await measurer.measureVerifyGas('0xf903fca00000000000000000000000000000000000000000000000000000000000000000a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794fffffffffffffffffffffffffffffffffffffffea0919fcc7ad870b53db0aa76eb588da06bacb6d230195100699fc928511003b422a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b901000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001808402625a0080845e9da7ceb9020500000000000000000000000000000000000000000000000000000000000000002a7cdd959bfe8d9487b2a43b33565295a698f7e26488aa4d1955ee33403f8ccb1d4de5fb97c7ade29ef9f4360c606c7ab4db26b016007d3ad0ab86a0ee01c3b1283aa067c58eab4709f85e99d46de5fe685b1ded8013785d6623cc18d214320b6bb6475978f3adfc719c99674c072166708589033e2d9afec2be4ec20253b8642161bc3f444f53679c1f3d472f7be8361c80a4c1e7e9aaf001d0877f1cfde218ce2fd7544e0b2cc94692d4a704debef7bcb61328b8f7166496996a7da21cf1f1b04d9b3e26a3d0772d4c407bbe49438ed859fe965b140dcf1aab71a96bbad7cf34b5fa511d8e963dbba288b1960e75d64430b3230294d12c6ab2aac5c2cd68e80b16b581ea0a6e3c511bbd10f4519ece37dc24887e11b55d7ae2f5b9e386cd1b50a4550696d957cb4900f03a82012708dafc9e1b880fd083b32182b869be8e0922b81f8e175ffde54d797fe11eb03f9e3bf75f1d68bf0b8b6fb4e317a0f9d6f03eaf8ce6675bc60d8c4d90829ce8f72d0163c1d5cf348a862d55063035e7a025f4da968de7e4d7e4004197917f4070f1d6caa02bbebaebb5d7e581e4b66559e635f805ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000880000000000000000', '56');
    console.log(`Gas Used: ${result}`);
  });
});
